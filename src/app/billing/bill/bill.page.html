<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button (click)="cancel()"></ion-back-button>
        </ion-buttons>
        <ion-title>{{ title }}</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>

    <form [formGroup]="billForm">

        <div formArrayName="products">
            <ion-grid>
                <ion-row>
                    <ion-col>
                        <ion-label position="floating">Nombre</ion-label>
                    </ion-col>
                    <ion-col>
                        <ion-label position="floating">Cantidad</ion-label>
                    </ion-col>
                    <ion-col>
                        <ion-label position="floating">Precio u</ion-label>
                    </ion-col>
                    <ion-col>
                        <ion-button (click)="presentModal()">
                            <ion-icon name="add-circle-outline"></ion-icon>
                        </ion-button>
                    </ion-col>
                </ion-row>
            </ion-grid>

            <ion-grid *ngFor="let p of productsForm.controls; let i = index" [formGroupName]="i">
                <ion-row>
                    <ion-col>
                        <ion-input readonly="readonly" type="text" formControlName="productName"></ion-input>
                    </ion-col>
                    <ion-col>
                        <ion-input readonly="readonly" type="number" formControlName="quantity"></ion-input>
                    </ion-col>
                    <ion-col>
                        <ion-input readonly="readonly" type="number" formControlName="price"></ion-input>
                    </ion-col>
                    <ion-col>
                        <ion-button color="danger" (click)="deleteProduct( i )">
                            <ion-icon slot="icon-only" name="close"></ion-icon>
                        </ion-button>
                    </ion-col>
                </ion-row>
            </ion-grid>

        </div>

        <ion-item>
            <ion-label position="floating">Sub Total</ion-label>
            <ion-input readonly="readonly" type="text" formControlName="subTotal"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label position="floating">Total</ion-label>
            <ion-input readonly="readonly" type="text" formControlName="total"></ion-input>
        </ion-item>

        <ion-button expand="full" type="submit" [disabled]="!billForm.valid" (click)="SAVE()">{{ btnBill }}</ion-button>
    </form>

</ion-content>